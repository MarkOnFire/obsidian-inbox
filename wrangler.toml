name = "email-to-obsidian"
main = "src/worker.ts"
compatibility_date = "2024-01-01"

[triggers]
crons = ["0 6 * * *"]  # Daily at 6 AM UTC (midnight CST)

[vars]
INBOX_FOLDER = "0 - INBOX"
NEWSLETTER_FOLDER = "0 - INBOX/Newsletters"
AGENT_FOLDER = "0 - INBOX/Agent Messages"
FORWARD_TO = "you@gmail.com"  # Audit trail: every email forwarded here
CF_ACCOUNT_ID = "your-cf-account-id"
CF_ZONE_IDS = "zone-id-1,zone-id-2,zone-id-3"
CF_ZONE_NAMES = "yourdomain.com,otherdomain.com,thirddomain.com"
# CF_API_TOKEN stored as a secret: npx wrangler secret put CF_API_TOKEN

[[r2_buckets]]
binding = "OBSIDIAN_BUCKET"
bucket_name = "obsidian-inbox"  # Change to your R2 bucket name
