name = "email-to-obsidian"
main = "src/worker.ts"
compatibility_date = "2024-01-01"
workers_dev = true

[triggers]
crons = ["0 6 * * *"]  # Daily at 6 AM UTC (midnight CST)

[vars]
INBOX_FOLDER = "0 - INBOX"
NEWSLETTER_FOLDER = "0 - INBOX/NEWSLETTERS"
AGENT_FOLDER = "0 - INBOX/AGENT MESSAGES"
WORKER_URL = ""
ATTACHMENT_RETENTION_DAYS = "90"
# Personal/infrastructure values stored as Wrangler secrets:
#   npx wrangler secret put FORWARD_TO
#   npx wrangler secret put WORKER_URL  (set to https://email-to-obsidian.<subdomain>.workers.dev)
#   npx wrangler secret put CF_ACCOUNT_ID
#   npx wrangler secret put CF_ZONE_IDS
#   npx wrangler secret put CF_ZONE_NAMES
#   npx wrangler secret put CF_API_TOKEN

[[r2_buckets]]
binding = "OBSIDIAN_BUCKET"
bucket_name = "obsidian-inbox"  # Change to your R2 bucket name
